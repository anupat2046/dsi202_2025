{% extends 'myapp/base.html' %}
{% load static %}

{% block title %}Chum-Chon Link - ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å{% endblock %}

{% block content %}

{% if user.is_authenticated %}
    <h2 class="text-3xl font-bold text-gray-900 flex items-center gap-3">
        Welcome, {{ user.username }} üëã
        {% if user.userprofile.is_premium %}
            <span class="inline-block bg-yellow-400 text-white px-3 py-1 rounded-full font-semibold text-base">
                ‚òÖ ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©
            </span>
        {% endif %}
    </h2>

    {% if not user.userprofile.is_premium %}
        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏¥‡πÄ‡∏®‡∏© -->
        <div class="my-8 p-6 bg-yellow-50 border-l-4 border-yellow-400 rounded shadow flex flex-col md:flex-row items-center md:items-start gap-4">
            <div class="flex-1">
                <h3 class="text-xl font-bold text-yellow-700 mb-2">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!</h3>
                <ul class="list-disc pl-6 text-yellow-800 mb-2">
                    <li>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</li>
                    <li>‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö Badge ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©</li>
                    <li>‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°/‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏±‡∏ö</li>
                    <li>‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏≠‡∏µ‡∏Å‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢</li>
                </ul>
                <a href="{% url 'premium_payment' %}" class="inline-block mt-2 bg-yellow-400 hover:bg-yellow-500 text-white font-semibold px-5 py-2 rounded transition">
                    ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©
                </a>
            </div>
        </div>
    {% endif %}
{% else %}
    <!-- ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô -->
    <div class="my-8 p-6 bg-yellow-50 border-l-4 border-yellow-400 rounded shadow flex flex-col md:flex-row items-center md:items-start gap-4">
        <div class="flex-1">
            <h3 class="text-xl font-bold text-yellow-700 mb-2">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!</h3>
            <ul class="list-disc pl-6 text-yellow-800 mb-2">
                <li>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</li>
                <li>‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö Badge ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©</li>
                <li>‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°/‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏±‡∏ö</li>
                <li>‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏≠‡∏µ‡∏Å‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢</li>
            </ul>
            <a href="{% url 'signup' %}" class="inline-block mt-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold px-5 py-2 rounded transition">
                ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å Chum-Chon Link
            </a>
        </div>
    </div>
{% endif %}

{% if not user.is_authenticated %}
<div class="flex items-center space-x-6 my-10">
    <!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏° -->
    <div class="flex-1">
        <h2 class="text-2xl font-extrabold text-gray-900 mb-2 border-l-4 border-purple-500 pl-2">
            ‡∏ó‡∏µ‡πà‡∏ã‡∏∂‡πà‡∏á‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏•‡∏≤‡∏Å‡∏™‡∏µ ‡πÇ‡∏ö‡∏¢‡∏ö‡∏¥‡∏ô‡∏°‡∏≤‡∏û‡∏ö‡∏Å‡∏±‡∏ô
        </h2>
        <div class="space-y-4 text-gray-700 leading-relaxed">
            <p>
                ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÜ ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏û‡∏ö‡∏õ‡∏∞ ‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û
            </p>
            <p>
                ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏•‡∏≤‡∏Å‡∏™‡∏µ‡∏™‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏ö‡∏¢‡∏ö‡∏¥‡∏ô‡∏°‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ ‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏ô‡∏∏‡∏Å‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà
            </p>
            <p>
                ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏û‡∏ö‡∏Ñ‡∏ô‡πÉ‡∏à‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡πà‡∏ß‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏ö‡∏¥‡∏ô‡πÑ‡∏õ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô!
            </p>
        </div>
        <a href="{% url 'signup' %}" class="mt-4 inline-block bg-purple-600 hover:bg-purple-700 text-white font-medium px-5 py-3 rounded-md transition">
            ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Chum-Chon Link
        </a>
    </div>
    <!-- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û -->
    <div class="flex-shrink-0">
        <img src="{% static 'images/signup-banner.png' %}" alt="Signup Banner" class="w-72 h-auto rounded-md">
    </div>
</div>
{% endif %}

<section class="py-10">
    <div class="text-center mb-10">
        <h1 class="text-4xl font-bold text-gray-800 mb-4">‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡πÉ‡∏à</h1>
        <p class="text-xl text-gray-600">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏≠‡∏ö ‡∏û‡∏ö‡∏õ‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô</p>
    </div>

    <!-- Search Section -->
    <div class="max-w-2xl mx-auto mb-12">
        <form action="{% url 'event_list' %}" method="get" class="flex">
            <input type="text" name="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°..." class="w-full px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-purple-500">
            <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-r-md">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
        </form>
    </div>

    <!-- Communities -->
    <div class="mb-12">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            {% for community in communities %}
            <a href="{% url 'event_list' %}?community={{ community.id }}" class="group">
                <div class="relative rounded-lg overflow-hidden h-40 bg-gray-200">
                    {% if community.image %}
                    <img src="{{ community.image.url }}" alt="{{ community.name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                    {% else %}
                    <div class="w-full h-full flex items-center justify-center bg-green-100">
                        <span class="text-green-600 font-bold text-lg">{{ community.name }}</span>
                    </div>
                    {% endif %}
                    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
                        <h3 class="text-white font-bold text-xl">{{ community.name }}</h3>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>

    <!-- Categories -->
    <div class="mb-12">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            {% for category in categories %}
            <a href="{% url 'event_list' %}?category={{ category.id }}" class="group">
                <div class="relative rounded-lg overflow-hidden h-40 bg-gray-200">
                    {% if category.image %}
                    <img src="{{ category.image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                    {% else %}
                    <div class="w-full h-full flex items-center justify-center bg-blue-100">
                        <span class="text-blue-600 font-bold text-lg">{{ category.name }}</span>
                    </div>
                    {% endif %}
                    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
                        <h3 class="text-white font-bold text-xl">{{ category.name }}</h3>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>

    <!-- Featured Events -->
    <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for event in featured_events %}
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="h-48 overflow-hidden">
                    {% if event.image %}
                    <img src="{{ event.image.url }}" alt="{{ event.title }}" class="w-full h-full object-cover">
                    {% else %}
                    <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                        <span class="text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</span>
                    </div>
                    {% endif %}
                </div>
                <div class="p-4">
                    <h3 class="font-bold text-lg mb-2">{{ event.title }}</h3>
                    <p class="text-gray-600 mb-3">{{ event.date|date:"d M Y" }} | {{ event.time|time:"H:i" }}</p>
                    <p class="text-gray-600 mb-4">{{ event.location }}</p>
                    <a href="{% url 'event_detail' event.id %}" class="block text-center bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-md">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                </div>
            </div>
            {% empty %}
            <div class="col-span-4 text-center py-10">
                <p class="text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}